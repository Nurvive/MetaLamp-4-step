class e{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}notify(e){this.observers.forEach((t=>t(e)))}}var t=class{constructor(){this.element=document.createElement("span"),this.element.classList.add("slider__head-bubble"),this.element.setAttribute("data-type","bubble")}};var i=class{constructor(e,i,s,a){this.parent=e,this.direction=i,this.bubble=(new t).element,this.template="horizontal"===this.direction?"<div class='slider__head'>\n            </div>":"<div class='slider__head slider__head_vertical'>\n            </div>",this.parent.insertAdjacentHTML("afterbegin",this.template),this.element=this.parent.querySelector(".slider__head"),this.element.append(this.bubble),this.updatePosition(s),this.updateBubble(a)}removeHead(){return this.element.remove(),!0}updatePosition(e){"horizontal"===this.direction?this.element.style.left=100*e+"%":this.element.style.top=100*e+"%"}updateBubble(e){return!!this.bubble&&(this.bubble.innerHTML=String(e),!0)}showBubble(){this.bubble.style.display="block"}hideBubble(){this.bubble.style.display="none"}get getWidth(){return this.element.getBoundingClientRect().width}get getHeight(){return this.element.getBoundingClientRect().height}};var s=class{constructor(e,t,i,s){this.parent=e,this.direction=t,this.template="horizontal"===this.direction?'<div class="slider__scale"></div>':'<div class="slider__scale slider__scale_vertical"></div>',this.parent.insertAdjacentHTML("beforeend",this.template),this.element=this.parent.querySelector(".slider__scale"),this.init(i,s)}init(e,t){const i=(t-e)/4;for(let t=0;t<=100;t+=5)if(t%25==0){"horizontal"===this.direction?this.element.insertAdjacentHTML("beforeend",`<div class='slider__dash' style='left: ${t}%;'></div><div class='slider__scale-number' style='left: ${t}%;'></div>`):this.element.insertAdjacentHTML("beforeend",`<div class='slider__dash slider__dash_vertical' style='top: ${t}%;'></div><div class='slider__scale-number slider__scale-number_vertical' style='top: ${t}%;'></div>`);const s=this.element.querySelectorAll(".slider__scale-number"),a=s[s.length-1];a.innerHTML=String(0===t?e:e+t/25*i)}else"horizontal"===this.direction?this.element.insertAdjacentHTML("beforeend",`<div class='slider__dash slider__dash_small' style='left: ${t}%;'></div>`):this.element.insertAdjacentHTML("beforeend",`<div class='slider__dash slider__dash_small-vertical' style='top: ${t}%;'></div>`)}removeScale(){this.element.remove()}get getWidth(){return this.element.getBoundingClientRect().width}get getLeftCoordinate(){return this.element.getBoundingClientRect().left}get getHeight(){return this.element.getBoundingClientRect().height}get getTopCoordinate(){return this.element.getBoundingClientRect().top}};var a=class{constructor(e,t,i){this.parent=e,this.direction=t,this.type=i,this.template="horizontal"===this.direction?'<div class="slider__line"><span class="slider__line-progress"></span></div>':'<div class="slider__line slider__line_vertical"><span class="slider__line-progress slider__line-progress_vertical"></span></div>',this.parent.insertAdjacentHTML("beforeend",this.template),this.element=this.parent.querySelector(".slider__line"),this.progressBar=this.element.querySelector(".slider__line-progress")}set setType(e){this.type=e}progressValue(e,t){"horizontal"===this.direction?"single"===this.type?this.progressBar.style.width=e.style.left:void 0!==t&&(this.progressBar.style.width=parseInt(e.style.left,10)-parseInt(t.style.left,10)+"%",this.progressBar.style.left=t.style.left):"single"===this.type?this.progressBar.style.height=e.style.top:void 0!==t&&(this.progressBar.style.height=parseInt(e.style.top,10)-parseInt(t.style.top,10)+"%",this.progressBar.style.top=t.style.top)}removeLine(){this.element.remove()}get getWidth(){return this.element.getBoundingClientRect().width}get getLeftCoordinate(){return this.element.getBoundingClientRect().left}get getHeight(){return this.element.getBoundingClientRect().height}get getTopCoordinate(){return this.element.getBoundingClientRect().top}};class n extends e{constructor(e,t){super(),this.handleHeadStart=e=>{const t=n.getEvent(e),i=t.target,s=i.hasAttribute("data-valueFrom")?"valueFrom":"valueTo",a=[];return"horizontal"===this.state.direction?(a.push(i.getBoundingClientRect().left),a.push(t.clientX)):(a.push(i.getBoundingClientRect().top),a.push(t.clientY)),this.handleSwipe=e=>this.swipeAction(e,a,s),document.addEventListener("touchmove",this.handleSwipe,{passive:!1}),document.addEventListener("mousemove",this.handleSwipe),document.addEventListener("touchend",this.handleSwipeEnd),document.addEventListener("mouseup",this.handleSwipeEnd),a},this.swipeAction=(e,t,i)=>{e.preventDefault();const s=n.getEvent(e);return"horizontal"===this.state.direction?(t.push(this.line.getWidth),t.push(this.line.getLeftCoordinate),t.push(s.clientX)):(t.push(this.line.getHeight),t.push(this.line.getTopCoordinate),t.push(s.clientY)),t.push(this.head.getWidth/2),this.notify({valueArr:t.slice(),target:i,onlyState:!1}),t.splice(2,t.length-2),t},this.handleSwipeEnd=()=>(document.removeEventListener("touchmove",this.handleSwipe),document.removeEventListener("mousemove",this.handleSwipe),document.removeEventListener("touchend",this.handleSwipeEnd),document.removeEventListener("mouseup",this.handleSwipeEnd),!0),this.handleScaleClick=e=>{const t=this.scaleClickData(e);return this.notify({target:"value",valueArr:t.slice(),onlyState:!1}),t},this.elem=e,this.handleSwipe=()=>[],this.state={bubble:!0,max:100,min:0,step:1,type:"single",valueTo:100,valueFrom:5,direction:"horizontal",onChangeTo:function(){},onChangeFrom:function(){}},Object.assign(this.state,t),this.line=new a(this.elem,this.state.direction,this.state.type),this.scale=new s(this.line.element,this.state.direction,this.state.min,this.state.max);const h=this.calcHeadStartPosition(this.state.valueTo);this.head=new i(this.line.element,this.state.direction,h,this.state.valueTo)}init(){if("double"===this.state.type){const e=this.calcHeadStartPosition(this.state.valueFrom);this.head2=new i(this.line.element,this.state.direction,e,this.state.valueFrom),this.head2.element.setAttribute("data-valueFrom","true")}this.state.bubble&&(this.head.showBubble(),"double"===this.state.type&&void 0!==this.head2&&this.head2.showBubble()),this.line.progressValue(this.head.element,this.head2?.element),this.setup()}changePosition(e){if(e.onlyState)return;let t=0;if(void 0===e.valueN)throw new Error("Новое значение не определено");if(t=e.valueN,"valueTo"===e.target)this.head.updatePosition(t),this.head.updateBubble(this.state.valueTo),this.state.onChangeTo(this.state.valueTo),this.line.progressValue(this.head.element,this.head2?.element);else if("valueFrom"===e.target){if(void 0===this.head2)throw new Error("Head2 не существует");this.head2.updatePosition(t),this.head2.updateBubble(this.state.valueFrom),this.state.onChangeFrom(this.state.valueFrom),this.line.progressValue(this.head.element,this.head2.element)}}hideBubble(){this.updateState({target:"bubble",valueB:!1,onlyState:!0}),this.head.hideBubble(),this.head2?.hideBubble(),this.notify({target:"bubble",valueB:!1,onlyState:!0})}showBubble(){this.updateState({target:"bubble",valueB:!0,onlyState:!0}),this.head.showBubble(),this.head2?.showBubble(),this.notify({target:"bubble",valueB:!0,onlyState:!0})}set changeOrientation(e){this.updateState({target:"direction",valueS:e,onlyState:!0}),this.head.removeHead(),this.head2?.removeHead(),this.scale.removeScale(),this.line.removeLine(),this.reInit(),this.notify({target:"direction",valueS:e,onlyState:!0})}set changeType(e){this.updateState({target:"type",valueS:e,onlyState:!0}),this.head.removeHead(),this.head2?.removeHead(),delete this.head2,this.scale.removeScale(),this.line.removeLine(),this.reInit(),this.notify({target:"type",valueS:e,onlyState:!0})}set changeStep(e){if(e>this.state.max-this.state.min)throw new Error("Шаг не может быть больше разницы максимума и минимума");this.state.step=e}set changeMax(e){if(e<this.state.min||e<=this.state.valueFrom)throw new Error("Максимум не может быть меньше минимума");this.updateState({target:"max",valueN:e,onlyState:!0}),this.head.removeHead(),this.head2?.removeHead(),this.scale.removeScale(),this.line.removeLine(),this.reInit()}set changeMin(e){if(e>this.state.max||e>=this.state.valueTo)throw new Error("Минимум не может быть больше максимума");this.updateState({target:"min",valueN:e,onlyState:!0}),this.head.removeHead(),this.head2?.removeHead(),this.scale.removeScale(),this.line.removeLine(),this.reInit()}updateState(e){e.onlyState&&("string"==typeof this.state[e.target]?this.state[e.target]=e.valueS:"number"==typeof this.state[e.target]?this.state[e.target]=e.valueN:this.state[e.target]=e.valueB)}reInit(){if(this.line=new a(this.elem,this.state.direction,this.state.type),this.scale=new s(this.line.element,this.state.direction,this.state.min,this.state.max),"double"===this.state.type){const e=this.calcHeadStartPosition(this.state.valueFrom);this.head2=new i(this.line.element,this.state.direction,e,this.state.valueFrom),this.head2.element.setAttribute("data-valueFrom","true")}const e=this.calcHeadStartPosition(this.state.valueTo);this.head=new i(this.line.element,this.state.direction,e,this.state.valueTo),this.state.bubble&&(this.head.showBubble(),"double"===this.state.type&&void 0!==this.head2&&this.head2.showBubble()),this.line.progressValue(this.head.element,this.head2?.element),this.setup()}setup(){if("double"===this.state.type){if(void 0===this.head2)throw new Error("Head2 не существует");this.head2.element.addEventListener("mousedown",this.handleHeadStart),this.head2.element.addEventListener("touchstart",this.handleHeadStart)}this.head.element.addEventListener("mousedown",this.handleHeadStart),this.head.element.addEventListener("touchstart",this.handleHeadStart),this.scale.element.addEventListener("click",this.handleScaleClick)}calcHeadStartPosition(e){return(e-this.state.min)/(this.state.max-this.state.min)}static getEvent(e){return e instanceof TouchEvent?e.touches[0]:e}scaleClickData(e){const t=n.getEvent(e),i=[];return"horizontal"===this.state.direction?(i.push(this.line.getWidth),i.push(this.line.getLeftCoordinate),i.push(t.clientX)):(i.push(this.line.getHeight),i.push(this.line.getTopCoordinate),i.push(t.clientY)),i}}class h{constructor(e,t,i){this.model=t,this.view=i,this.view.subscribe(this.model.updateState.bind(this.model)),this.view.subscribe(this.model.calcPosition.bind(this.model)),this.model.subscribe(this.view.updateState.bind(this.view)),this.model.subscribe(this.view.changePosition.bind(this.view))}}class l extends e{constructor(e){super(),this.isValueTo=e=>(e-this.state.valueFrom)/(this.state.valueTo-this.state.valueFrom)>=.5,this.elem=e,this.state={bubble:!0,max:100,min:0,step:1,type:"single",valueTo:100,valueFrom:5,direction:"horizontal",onChangeTo:function(){},onChangeFrom:function(){}}}init(e){Object.assign(this.state,e)}calcPosition(e){if(e.onlyState)return;let t,i;"valueTo"===e.target?(i="valueTo",t=this.calcUpdatedValue(e,i)):"value"===e.target?(t=this.calcUpdatedValueRelative(e),i="single"===this.state.type||this.isValueTo(t)?"valueTo":"valueFrom",t="valueFrom"===i?this.validValueFrom(t):this.validValueTo(t)):(i="valueFrom",t=this.calcUpdatedValue(e,i)),this.updateState({target:i,valueN:t,onlyState:!0}),this.notify({target:i,valueN:t,onlyState:!0});let s=l.getValueRelative(t,this.state.min,this.state.max);s=l.moreThan0LessThan1(s),this.notify({target:i,valueN:s,onlyState:!1})}set changeOrientation(e){this.updateState({target:"direction",valueS:e,onlyState:!0})}set changeType(e){this.updateState({target:"type",valueS:e,onlyState:!0})}set changeStep(e){if(e>this.state.max-this.state.min)throw new Error("Шаг не может быть больше разницы максимума и минимума");this.state.step=e}set changeMax(e){if(e<this.state.min||e<=this.state.valueFrom)throw new Error("Максимум не может быть меньше минимума");this.updateState({target:"max",valueN:e,onlyState:!0}),e<this.state.valueTo&&(this.changeTo=e)}set changeMin(e){if(e>this.state.max||e>=this.state.valueTo)throw new Error("Минимум не может быть больше максимума");this.updateState({target:"min",valueN:e,onlyState:!0}),e>this.state.valueFrom&&(this.changeFrom=e)}set changeTo(e){this.updateState({target:"valueTo",valueN:this.validValueTo(e),onlyState:!0}),this.notify({valueN:this.state.valueTo,target:"valueTo",onlyState:!0});let t=l.getValueRelative(e,this.state.min,this.state.max);t=l.moreThan0LessThan1(t),this.notify({valueN:t,target:"valueTo",onlyState:!1})}set changeFrom(e){this.updateState({target:"valueFrom",valueN:this.validValueFrom(e),onlyState:!0}),this.notify({valueN:this.state.valueFrom,target:"valueFrom",onlyState:!0});let t=l.getValueRelative(e,this.state.min,this.state.max);t=l.moreThan0LessThan1(t),this.notify({valueN:t,target:"valueFrom",onlyState:!1})}updateState(e){e.onlyState&&("string"==typeof this.state[e.target]?this.state[e.target]=e.valueS:"number"==typeof this.state[e.target]?this.state[e.target]=e.valueN:this.state[e.target]=e.valueB)}static moreThan0LessThan1(e){let t=e;return t=t>1?1:t,t=t<0?0:t,t}static getValueRelative(e,t,i){return(e-t)/(i-t)}calcValue(e){let t=e;return t*=this.state.max-this.state.min,this.state.min+this.calcValueByStep(t)}calcValueByStep(e){let t=e;if(void 0===this.state.step)throw new Error("Значение step не определено");const i=t/this.state.step;t=i%1>=.5?this.state.step*Math.ceil(i):this.state.step*Math.floor(i);const s=this.state.step.toString().split(".").pop();let a=0;return void 0!==s&&(a=this.state.step.toString().includes(".")?s.length:0),Number(t.toFixed(a))}validValueTo(e){let t=e;return"single"===this.state.type?t>this.state.max?t=this.state.max:t<this.state.min&&(t=this.state.min):"double"===this.state.type&&(t>this.state.max?t=this.state.max:t<=this.state.valueFrom&&(t=this.state.valueFrom+this.state.step)),t}validValueFrom(e){let t=e;return"single"===this.state.type?t=0:"double"===this.state.type&&(t<this.state.min?t=this.state.min:t>=this.state.valueTo&&(t=this.state.valueTo-this.state.step)),t}calcUpdatedValue(e,t){let i=0;if(void 0===e.valueArr)throw new Error("Ожидался массив значений для Model");i=e.valueArr[5];const s=e.valueArr[2],a=e.valueArr[3],n=e.valueArr[0],h=e.valueArr[1]-n;let r=(e.valueArr[4]-h-a+i)/s;r=l.moreThan0LessThan1(r);const o=this.calcValue(r);return"valueTo"===t?this.validValueTo(o):this.validValueFrom(o)}calcUpdatedValueRelative(e){if(void 0===e.valueArr)throw new Error("Ожидался массив значений для Model");const t=e.valueArr[0],i=e.valueArr[1];let s=(e.valueArr[2]-i)/t;return s=l.moreThan0LessThan1(s),this.calcValue(s)}}class r{constructor(e,t){this.elem=e,this.model=new l(this.elem),this.model.init(t),this.view=new n(this.elem,t),this.view.init(),this.presenter=new h(this.elem,this.model,this.view)}hideBubble(){return this.view.hideBubble(),!0}showBubble(){return this.view.showBubble(),!0}changeOrientation(e){return this.view.changeOrientation=e,this.model.changeOrientation=e,!0}changeType(e){return this.view.changeType=e,this.model.changeType=e,!0}changeStep(e){return this.model.changeStep=e,this.view.changeStep=e,!0}changeTo(e){return this.model.changeTo=e,!0}changeFrom(e){return this.model.changeFrom=e,!0}changeMax(e){return this.model.changeMax=e,this.view.changeMax=e,!0}changeMin(e){return this.model.changeMin=e,this.view.changeMin=e,!0}}!function(e){const t=[],i={init:function(i){const s=e.extend({bubble:!0,max:100,min:0,step:1,type:"single",valueTo:100,valueFrom:5,direction:"horizontal",onChangeTo:function(){},onChangeFrom:function(){}},i);return this.each((function(){const i=e(this);if(s.step>s.max-s.min)throw new Error("Шаг не может быть больше разницы максимума и минимума");if(s.valueTo>s.max)throw new Error("Текущее значение не может быть больше максимума");if(s.valueFrom<s.min)throw new Error("Текущее значение не может быть меньше минимума");t.push(new r(i[0],s))}))},hideBubble:function(){let e;t.forEach((t=>{t.elem===this[0]&&(e=t)})),e.hideBubble()},showBubble:function(){let e;t.forEach((t=>{t.elem===this[0]&&(e=t)})),e.showBubble()},changeOrientation:function(e){let i;t.forEach((e=>{e.elem===this[0]&&(i=e)})),i.changeOrientation(e)},changeType:function(e){let i;t.forEach((e=>{e.elem===this[0]&&(i=e)})),i.changeType(e)},changeStep:function(e){let i;if(t.forEach((e=>{e.elem===this[0]&&(i=e)})),Number.isNaN(e))throw new Error("step должно быть числом");i.changeStep(e)},changeTo:function(e){let i;if(t.forEach((e=>{e.elem===this[0]&&(i=e)})),Number.isNaN(e))throw new Error("valueTo должно быть числом");i.changeTo(e)},changeFrom:function(e){let i;if(t.forEach((e=>{e.elem===this[0]&&(i=e)})),Number.isNaN(e))throw new Error("valueFrom должно быть числом");i.changeFrom(e)},changeMax:function(e){let i;if(t.forEach((e=>{e.elem===this[0]&&(i=e)})),Number.isNaN(e))throw new Error("valueFrom должно быть числом");i.changeMax(e)},changeMin:function(e){let i;if(t.forEach((e=>{e.elem===this[0]&&(i=e)})),Number.isNaN(e))throw new Error("valueFrom должно быть числом");i.changeMin(e)}};e.fn.Slider=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Метод с именем "+t+" не существует для jQuery.slider"),null):i.init.apply(this,arguments)}}(jQuery),$((function(){const e=$('input[data-type="bubble"]'),t=$('input[data-type="vertical"]'),i=$('input[data-type="range"]'),s=$('input[data-type="step"]'),a=$('input[data-type="to"]'),n=$('input[data-type="from"]'),h=$('input[data-type="max"]'),l=$('input[data-type="min"]'),r=$("#slider").Slider({bubble:!0,direction:"horizontal",max:100,min:0,step:1,type:"double",valueTo:100,valueFrom:0,onChangeTo:function(e){a.val(e)},onChangeFrom:function(e){n.val(e)}});e.on("click",(function(){this.checked?r.Slider("showBubble"):r.Slider("hideBubble")})),t.on("click",(function(){this.checked?r.Slider("changeOrientation","vertical"):r.Slider("changeOrientation","horizontal")})),i.on("click",(function(){this.checked?r.Slider("changeType","double"):r.Slider("changeType","single")})),s.on("input",(function(){r.Slider("changeStep",parseFloat(this.value))})),a.on("input",(function(){r.Slider("changeTo",parseFloat(this.value))})),n.on("input",(function(){r.Slider("changeFrom",parseFloat(this.value))})),h.on("input",(function(){r.Slider("changeMax",parseFloat(this.value))})),l.on("input",(function(){r.Slider("changeMin",parseFloat(this.value))}));const o=$('input[data-type="bubble2"]'),u=$('input[data-type="vertical2"]'),d=$('input[data-type="range2"]'),c=$('input[data-type="step2"]'),p=$('input[data-type="to2"]'),m=$('input[data-type="from2"]'),v=$('input[data-type="max2"]'),g=$('input[data-type="min2"]'),b=$("#slider2").Slider({bubble:!1,direction:"vertical",max:90,min:5,step:2,type:"single",valueTo:50,valueFrom:15,onChangeTo:function(e){p.val(e)},onChangeFrom:function(e){m.val(e)}});o.on("click",(function(){this.checked?b.Slider("showBubble"):b.Slider("hideBubble")})),u.on("click",(function(){this.checked?b.Slider("changeOrientation","vertical"):b.Slider("changeOrientation","horizontal")})),d.on("click",(function(){this.checked?b.Slider("changeType","double"):b.Slider("changeType","single")})),c.on("input",(function(){b.Slider("changeStep",parseInt(this.value,10))})),p.on("input",(function(){b.Slider("changeTo",parseInt(this.value,10))})),m.on("input",(function(){b.Slider("changeFrom",parseInt(this.value,10))})),v.on("input",(function(){b.Slider("changeMax",parseInt(this.value,10))})),g.on("input",(function(){b.Slider("changeMin",parseInt(this.value,10))}));const y=$('input[data-type="bubble3"]'),S=$('input[data-type="vertical3"]'),f=$('input[data-type="range3"]'),w=$('input[data-type="step3"]'),T=$('input[data-type="to3"]'),_=$('input[data-type="from3"]'),F=$('input[data-type="max3"]'),B=$('input[data-type="min3"]'),E=$("#slider3").Slider({bubble:!0,direction:"horizontal",max:1e3,min:-100,step:30,type:"single",valueTo:780,valueFrom:-5,onChangeTo:function(e){T.val(e)},onChangeFrom:function(e){_.val(e)}});y.on("click",(function(){this.checked?E.Slider("showBubble"):E.Slider("hideBubble")})),S.on("click",(function(){this.checked?E.Slider("changeOrientation","vertical"):E.Slider("changeOrientation","horizontal")})),f.on("click",(function(){this.checked?E.Slider("changeType","double"):E.Slider("changeType","single")})),w.on("input",(function(){E.Slider("changeStep",parseInt(this.value,10))})),T.on("input",(function(){E.Slider("changeTo",parseInt(this.value,10))})),_.on("input",(function(){E.Slider("changeFrom",parseInt(this.value,10))})),F.on("input",(function(){E.Slider("changeMax",parseInt(this.value,10))})),B.on("input",(function(){E.Slider("changeMin",parseInt(this.value,10))}))}));
//# sourceMappingURL=index.1940439f.js.map
